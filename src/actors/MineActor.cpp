#include <actors/MineActor.h>

#include <dtCore/transform.h>

////////////////////////////////////////////////////////////////////////////////
static const float MINE_LIFETIME = 30.0f;
static const float MINE_ARMING_DELAY = 1.5f;

//////////////////////////////////////////////////////////////////////////
MineActor::MineActor(dtGame::GameActorProxy& proxy)
   : ProjectileActor(proxy)
{
   SetLifetime(MINE_LIFETIME);
   SetArmingDelay(MINE_ARMING_DELAY);
}

//////////////////////////////////////////////////////////////////////////
MineActor::~MineActor()
{
}

///////////////////////////////////////////////////////////////////////////////
void MineActor::TickLocal(const dtGame::Message& msg)
{
   ProjectileActor::TickLocal(msg);

   dtCore::Transform currentTransform;
   GetTransform(currentTransform);
   currentTransform.SetRotation(currentTransform.GetRotation() + osg::Vec3(1.0, 0.0, 0.0));
   SetTransform(currentTransform);
}

///////////////////////////////////////////////////////////////////////////////
void MineActor::OnEnteredWorld()
{
   SetMeshResource("Boat:Mine.ive");
}

////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
MineActorProxy::MineActorProxy()
{

}

///////////////////////////////////////////////////////////////////////////////
MineActorProxy::~MineActorProxy()
{

}

///////////////////////////////////////////////////////////////////////////////
void MineActorProxy::CreateActor()
{
   MineActor* pActor = new MineActor(*this);
   SetActor(*pActor);
}

////////////////////////////////////////////////////////////////////////////////

